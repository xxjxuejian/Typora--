### åˆå§‹åŒ–é¡¹ç›®

ä½¿ç”¨vue3+viteå¼€å‘

#### å®‰è£…ä¾èµ–ï¼š

```ini
npm install cesium
```



#### `public` æ–‡ä»¶å¤¹çš„ä½œç”¨ï¼š

åœ¨ Vite é¡¹ç›®ä¸­ï¼Œ`public` æ–‡ä»¶å¤¹çš„ä½œç”¨æ˜¯ï¼š**å­˜æ”¾ä¸ä¼šè¢« Vite æ‰“åŒ…å¤„ç†çš„é™æ€èµ„æº**ï¼Œè¿™äº›èµ„æºä¼šåœ¨å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºæ—¶**åŸæ ·æ‹·è´åˆ°æœ€ç»ˆæ„å»ºè¾“å‡ºç›®å½•çš„æ ¹ç›®å½•ä¸‹**ï¼Œå¹¶å¯ä»¥ç›´æ¥é€šè¿‡æ ¹è·¯å¾„`/`è®¿é—®ã€‚

å‡è®¾ä½ é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```cpp
my-vite-project/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ Cesium/
â”‚           â”œâ”€â”€ Assets/
â”‚           â”œâ”€â”€ Widgets/
â”‚           â””â”€â”€ ...
â””â”€â”€ src/
    â””â”€â”€ main.ts
```

ä½ å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥è®¿é—®è¿™äº›èµ„æºï¼š

```js
window.CESIUM_BASE_URL = '/static/Cesium/';
```

```html
<img src="/static/logo.png" />
```

##### ğŸš« ä¸è¦åšçš„äº‹

- ä¸è¦åœ¨ `public` ä¸­æ”¾ `.js` æˆ– `.ts` æ¨¡å—ä»£ç ï¼Œå› ä¸ºè¿™äº›ä¸ä¼šè¢«å¤„ç†ã€ä¹Ÿæ— æ³•é€šè¿‡ `import` ä½¿ç”¨ã€‚
- ä¸è¦åœ¨ `public` ä¸­ä½¿ç”¨ Vue ç»„ä»¶æˆ–æ¨¡å—è¯­æ³•ï¼ˆå¦‚ `.vue` æ–‡ä»¶ï¼‰ï¼ŒVite ä¸ä¼šè¯†åˆ«å®ƒä»¬ã€‚

##### æ€»ç»“ä¸€å¥è¯ï¼š

> **`public` æ˜¯ç”¨æ¥æ”¾â€œåŸæ ·äº¤ä»˜â€çš„èµ„æºï¼Œé€‚åˆç”¨æ¥é…ç½®åŸºç¡€é™æ€æ–‡ä»¶ã€ç¬¬ä¸‰æ–¹åº“èµ„æºç­‰ï¼Œä¸å‚ä¸æ„å»ºè¿‡ç¨‹ã€‚**

å¦‚æœä½ æƒ³è¦è®©æŸäº›æ–‡ä»¶èµ°æ¨¡å—ç³»ç»Ÿï¼ˆæ¯”å¦‚ `import`ï¼‰ï¼Œåº”è¯¥æ”¾åœ¨ `src/` æˆ–é€šè¿‡æ’ä»¶å¤„ç†ã€‚



#### é…ç½®**CESIUM_BASE_URL**

Vite ä¼šå°† `public` ç›®å½•ä¸­çš„æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºï¼Œç›´æ¥æ˜ å°„åˆ°å¼€å‘æœåŠ¡å™¨çš„æ ¹è·¯å¾„ `/`





 CesiumJS åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒè¿è¡Œæ‰€éœ€çš„é™æ€èµ„æºæ–‡ä»¶

åœ¨å¯¼å…¥ CesiumJS ä¹‹å‰è®¾ç½®å…¨å±€å˜é‡ `window.CESIUM_BASE_URL`ï¼ŒæŒ‡å‘è¿™äº›èµ„æºæ‰€åœ¨çš„ URL è·¯å¾„ã€‚

æ‹·è´ä¸‹é¢å››ä¸ªæ–‡ä»¶å¤¹ï¼š

- `node_modules/cesium/Build/Cesium/Workers`
- `node_modules/cesium/Build/Cesium/ThirdParty`
- `node_modules/cesium/Build/Cesium/Assets`
- `node_modules/cesium/Build/Cesium/Widgets`

### åˆ›å»ºcesiumå®¹å™¨

æ¨¡æ¿ä¸­éœ€è¦ä¸€ä¸ªå®¹å™¨ï¼š`cesiumContainer`

```html
<div class="main-content" id="cesiumContainer"></div>
```

Viewerå‚æ•°

| å‚æ•°å                 | ç±»å‹              | è¯´æ˜                                  |
| ---------------------- | ----------------- | ------------------------------------- |
| `animation`            | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå·¦ä¸‹è§’åŠ¨ç”»æ§ä»¶ï¼ˆé»˜è®¤ `true`ï¼‰ |
| `timeline`             | `boolean`         | æ˜¯å¦æ˜¾ç¤ºæ—¶é—´çº¿ï¼ˆé»˜è®¤ `true`ï¼‰         |
| `baseLayerPicker`      | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå›¾å±‚é€‰æ‹©å™¨ï¼ˆé»˜è®¤ `true`ï¼‰     |
| `geocoder`             | `boolean`         | æ˜¯å¦æ˜¾ç¤ºåœ°åæœç´¢æ¡†ï¼ˆé»˜è®¤ `true`ï¼‰     |
| `homeButton`           | `boolean`         | æ˜¯å¦æ˜¾ç¤ºä¸»é¡µæŒ‰é’®                      |
| `fullscreenButton`     | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå…¨å±æŒ‰é’®                      |
| `infoBox`              | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå®ä½“ä¿¡æ¯æ¡†                    |
| `sceneModePicker`      | `boolean`         | æ˜¯å¦æ˜¾ç¤º 2D/3D/Columbus View åˆ‡æ¢     |
| `selectionIndicator`   | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå®ä½“é€‰ä¸­åœ†åœˆ                  |
| `navigationHelpButton` | `boolean`         | æ˜¯å¦æ˜¾ç¤ºå¯¼èˆªå¸®åŠ©æŒ‰é’®                  |
| `terrainProvider`      | `TerrainProvider` | è‡ªå®šä¹‰åœ°å½¢å›¾å±‚ï¼ˆé»˜è®¤æ˜¯æ‰å¹³åœ°çƒï¼‰      |
| `imageryProvider`      | `ImageryProvider` | è‡ªå®šä¹‰å½±åƒå›¾å±‚ï¼ˆé»˜è®¤æ˜¯ Bing Mapï¼‰     |
| `sceneMode`            | `SceneMode`       | åˆå§‹è§†è§’ç±»å‹ï¼ˆ2D/3D/Columbusï¼‰        |
| `useDefaultRenderLoop` | `boolean`         | æ˜¯å¦å¼€å¯é»˜è®¤æ¸²æŸ“å¾ªç¯ï¼ˆç”¨äºæ§åˆ¶æ€§èƒ½ï¼‰  |

### éšè— **å•†æ ‡ç‰ˆæƒä¿¡æ¯** å’Œ **æ•°æ®æºç‰ˆæƒ**

#### æ–¹æ³•ä¸€ï¼š

åœ¨ `Viewer` åˆå§‹åŒ–æ—¶ä¼ å…¥ `creditContainer` ä¸ºä¸€ä¸ªéšè—çš„ DOM å…ƒç´ ï¼š

```vue
<template>
  <div>
    <div id="cesiumContainer" style="width: 100%; height: 100vh;"></div>
    <!-- éšè— Cesium çš„ç‰ˆæƒä¿¡æ¯å®¹å™¨ -->
    <div id="hiddenCredit" style="display: none;"></div>
  </div>
</template>

<script setup>
import { onMounted } from 'vue';
import * as Cesium from 'cesium';
import 'cesium/Build/Cesium/Widgets/widgets.css';

window.CESIUM_BASE_URL = '/static/Cesium/';

onMounted(() => {
  const viewer = new Cesium.Viewer('cesiumContainer', {
      // å…³é”®ä»£ç 
    creditContainer: document.getElementById('hiddenCredit')
  });
});
</script>
```

è¿™æ ·ä¼šè®© Cesium åˆ›å»º `creditDisplay`ï¼Œä½†ä¸å†æ’å…¥é¡µé¢ä¸Šï¼Œå®˜æ–¹æ¨èä¸”æ— å‰¯ä½œç”¨ã€‚

#### æ–¹æ³•äºŒï¼š

```js
 viewer.cesiumWidget.creditContainer.style.display = "none";
```





### åœ°å½¢æ•°æ®ï¼šterrain

```js
const viewer = new Viewer('cesiumContainer', {
  terrain: Terrain.fromWorldTerrain(),
});
```

å‘Šè¯‰ `Cesium` ä½¿ç”¨ç”± `Cesium Ion` æä¾›çš„ **çœŸå®åœ°å½¢æ•°æ®æœåŠ¡**ï¼ŒåŒ…æ‹¬é«˜ç¨‹ï¼ˆElevationï¼‰ä¿¡æ¯ï¼Œè¿™æ ·åœ°è¡¨ä¸å†æ˜¯å¹³çš„ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä½ ä¸é…ç½® `terrain`ï¼ŒCesium ä½¿ç”¨çš„æ˜¯ä¸€ä¸ª**å¹³åœ°åœ°çƒ**ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰ç»çº¬åº¦ä½ç½®çš„é«˜ç¨‹éƒ½æ˜¯ **0**ã€‚

#### é«˜ç¨‹ä¿¡æ¯

**é«˜ç¨‹**å°±æ˜¯åœ°çƒä¸ŠæŸä¸ªç‚¹çš„**æµ·æ‹”é«˜åº¦**ã€‚

- æ˜¯æŒ‡æŸä¸ªåœ°ç‚¹**ç›¸å¯¹äºæµ·å¹³é¢**çš„é«˜åº¦ï¼ˆå•ä½é€šå¸¸æ˜¯ **ç±³**ï¼‰ã€‚
- åœ°çƒä¸æ˜¯å¹³çš„ï¼Œæœ‰å±±ã€æœ‰è°·ã€æœ‰å¹³åŸï¼Œæ¯ä¸ªåœ°æ–¹çš„é«˜ç¨‹ä¸ä¸€æ ·ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

| åœ°ç‚¹           | ç»åº¦  | çº¬åº¦ | é«˜ç¨‹ï¼ˆæµ·æ‹”ï¼‰              |
| -------------- | ----- | ---- | ------------------------- |
| å–œé©¬æ‹‰é›…å±±é¡¶   | 86Â°E  | 27Â°N | **8848 ç±³**               |
| åŒ—äº¬å¸‚ä¸­å¿ƒ     | 116Â°E | 39Â°N | **43 ç±³**                 |
| æ­»æµ·æ²¿å²¸       | 35Â°E  | 31Â°N | **-430 ç±³**ï¼ˆä½äºæµ·å¹³é¢ï¼‰ |
| å¤ªå¹³æ´‹ä¸­å¤®æµ·åŸŸ | -150Â° | 0Â°   | **0 ç±³**ï¼ˆæµ·å¹³é¢ï¼‰        |



å¦‚æœä½ åœ¨ Cesium ä¸­**æ²¡æœ‰é…ç½®åœ°å½¢æ•°æ®**ï¼Œé‚£ä¹ˆï¼š

- Cesium é»˜è®¤æŠŠæ•´ä¸ªåœ°çƒå½“ä½œä¸€ä¸ª**å®Œå…¨å¹³å¦çš„çƒä½“**
- æ¯ä¸€ä¸ªç»çº¬åº¦ç‚¹çš„é«˜ç¨‹éƒ½æ˜¯ **0 ç±³**
- è¿™å«åšâ€œæ‰å¹³åœ°çƒâ€ï¼ˆFlat Ellipsoidï¼‰

![image-20250603203334585](./../typora-pic/image-20250603203334585.png)



è®¾ç½®äº† `fromWorldTerrain()` ä¹‹åï¼ŒCesium ä¼šï¼š

- åŠ è½½å…¨çƒé«˜ç¨‹æ•°æ®ï¼ˆå±±åŒºã€å³¡è°·ã€å»ºç­‘åŒºåŸŸæ›´çœŸå®ï¼‰
- æ”¯æŒ**è´´åœ°**ç»˜åˆ¶ï¼ˆå¦‚æ¨¡å‹æˆ–å®ä½“è´´åˆåœ°è¡¨ï¼‰
- æ”¯æŒ**åœ°å½¢é˜´å½±å’Œé®æŒ¡**
- éƒ¨åˆ†åœ°å½¢åŒ…å«**æ‘„å½±æµ‹é‡æ¨¡å‹ï¼ˆ3D Tilesï¼‰**

![image-20250603203254679](./../typora-pic/image-20250603203254679.png)

##### âœ… ç»“è®º

> **é«˜ç¨‹ = æµ·æ‹”é«˜åº¦**
>
> Cesium é»˜è®¤åœ°çƒæ˜¯å¹³çš„ï¼Œé«˜ç¨‹ä¸º 0ï¼Œè®¾ç½®åœ°å½¢åæ‰æœ‰çœŸå®èµ·ä¼ã€‚

å¦‚æœä½ æƒ³åšçš„æ•ˆæœæ¶‰åŠï¼šè´´åœ°é£è¡Œã€æ¨¡å‹è½åœ¨å±±ä¸Šã€æ¨¡æ‹Ÿå»ºç­‘åœ°å½¢é«˜åº¦ï¼Œ**å¿…é¡»å¼€å¯åœ°å½¢æ•°æ®**ï¼ˆä¹Ÿå°±æ˜¯ `Terrain.fromWorldTerrain()`ï¼‰ã€‚



### Cesiumå›¾å±‚

**ä»åŠŸèƒ½ç»´åº¦åˆ†ç±»ï¼š**

| ç±»å‹              | Cesium ç±»                                    | ç”¨é€”                                       |
| ----------------- | -------------------------------------------- | ------------------------------------------ |
| **å½±åƒå›¾å±‚**      | `ImageryLayer`                               | æ˜¾ç¤ºåœ°å›¾å›¾åƒï¼Œå¦‚å«æ˜Ÿå›¾ã€è¡—é“å›¾ç­‰           |
| **åœ°å½¢å›¾å±‚**      | `TerrainProvider`                            | æ˜¾ç¤ºåœ°çƒè¡¨é¢çš„é«˜ä½èµ·ä¼ï¼ˆé«˜ç¨‹ï¼‰             |
| **å®ä½“å›¾å±‚**      | `EntityCollection`ï¼ˆå±äº `viewer.entities`ï¼‰ | æ˜¾ç¤ºç‚¹ã€çº¿ã€é¢ã€æ ‡ç­¾ã€æ¨¡å‹ç­‰â€œå®ä½“â€         |
| **3D Tiles å›¾å±‚** | `Cesium3DTileset`                            | åŠ è½½ä¸‰ç»´åŸå¸‚ã€å»ºç­‘ã€æ¨¡å‹ç­‰å¤§è§„æ¨¡ä¸‰ç»´æ•°æ®é›† |

####  ä¸€ã€å½±åƒå›¾å±‚ï¼ˆImagery Layersï¼‰

ç”¨äºæ˜¾ç¤ºåœ°å›¾å›¾åƒï¼ˆç“¦ç‰‡åœ°å›¾ï¼‰ï¼Œå¦‚å¤©åœ°å›¾ã€OpenStreetMapã€ArcGIS ç­‰ã€‚

ğŸ“¦ åŠ è½½æ–¹å¼ï¼š`viewer.imageryLayers.addImageryProvider(...)`

**å¸¸ç”¨å›¾å±‚æä¾›å™¨ï¼ˆImageryProvider ç±»ï¼‰ï¼š**

| ç±»å                                 | æè¿°                        | ç¤ºä¾‹æœåŠ¡                   |
| ------------------------------------ | --------------------------- | -------------------------- |
| âœ… `WebMapTileServiceImageryProvider` | æ ‡å‡† WMTS åè®®å›¾å±‚          | å¤©åœ°å›¾ã€å›½æµ‹å±€æœåŠ¡         |
| âœ… `TileMapServiceImageryProvider`    | TMS å›¾å±‚                    | ç¦»çº¿ç“¦ç‰‡ã€Cesium è‡ªå¸¦ç¤ºä¾‹  |
| âœ… `UrlTemplateImageryProvider`       | URL æ¨¡æ¿å›¾å±‚ï¼ˆçµæ´»ï¼‰        | é«˜å¾·ã€è…¾è®¯ã€OSM éæ ‡å‡†æ¥å£ |
| âœ… `ArcGisMapServerImageryProvider`   | Esri ArcGIS åœ°å›¾æœåŠ¡        | ArcGIS åœ¨çº¿åœ°å›¾            |
| âœ… `IonImageryProvider`               | Cesium Ion çš„å›¾å±‚ï¼ˆéœ€ç™»å½•ï¼‰ | Bing Mapsã€Sentinel-2      |
| `OpenStreetMapImageryProvider`       | åŠ è½½ OSM ç“¦ç‰‡åœ°å›¾           | OpenStreetMap æ ‡å‡†å›¾       |
| `BingMapsImageryProvider`            | Bing åœ°å›¾å›¾å±‚               | å·²è¢« Ion æ›¿ä»£ä¸ºé»˜è®¤æ–¹å¼    |

#### äºŒã€åœ°å½¢å›¾å±‚ï¼ˆTerrain Layersï¼‰

ç”¨äºåŠ è½½åœ°å½¢é«˜ç¨‹ä¿¡æ¯ï¼Œæ˜¾ç¤ºçœŸå®å±±è„‰ã€ä¸˜é™µç­‰åœ°å½¢ã€‚

ğŸ“¦ åŠ è½½æ–¹å¼ï¼šåœ¨ `Viewer` ä¸­ä¼ å…¥ `terrain` å‚æ•°ï¼Œä¾‹å¦‚ï¼š

```js
terrain: Cesium.Terrain.fromWorldTerrain()
```

**å¸¸è§åœ°å½¢æä¾›å™¨ï¼š**

| ç±»å                         | æè¿°                             | ç”¨æ³•                                |
| ---------------------------- | -------------------------------- | ----------------------------------- |
| âœ… `CesiumTerrainProvider`    | æ ‡å‡† Cesium åœ°å½¢æ ¼å¼ï¼ˆ.terrainï¼‰ | åŠ è½½è‡ªå®šä¹‰åœ°å½¢æ•°æ®                  |
| âœ… `Cesium.WorldTerrain`      | Cesium å®˜æ–¹æä¾›çš„å…¨çƒåœ°å½¢        | `Cesium.Terrain.fromWorldTerrain()` |
| âœ… `EllipsoidTerrainProvider` | é»˜è®¤åœ°å½¢ï¼šçº¯æ¤­çƒä½“ï¼ˆæ— èµ·ä¼ï¼‰     | ç”¨äºä¸éœ€è¦çœŸå®é«˜ç¨‹çš„é¡¹ç›®            |

#### ä¸‰ã€æ•°æ®å›¾å±‚ï¼ˆData Layers / Entities / Primitivesï¼‰

ç”¨äºåŠ è½½å¯äº¤äº’çš„åœ°ç†å¯¹è±¡ï¼Œå¦‚ç‚¹ã€çº¿ã€é¢ã€3D æ¨¡å‹ç­‰ã€‚

ğŸ“¦ åŠ è½½æ–¹å¼ï¼š`viewer.entities.add(...)`ã€`viewer.scene.primitives.add(...)` ç­‰

**å¸¸è§æ ¼å¼æˆ–åŠ è½½å™¨ï¼š**

| ç±»å‹                    | ç”¨æ³•                       | è¯´æ˜                            |
| ----------------------- | -------------------------- | ------------------------------- |
| âœ… `EntityCollection`    | `viewer.entities`          | é«˜å±‚å°è£…ï¼Œæ”¯æŒåŠ¨æ€å±æ€§          |
| âœ… `PrimitiveCollection` | `viewer.scene.primitives`  | ä½å±‚ APIï¼Œæ€§èƒ½é«˜ä½†å¤æ‚          |
| âœ… CZML                  | `Cesium.CzmlDataSource`    | åŠ¨æ€æ—¶é—´æ•°æ®æ ¼å¼ï¼Œå®˜æ–¹æ¨è      |
| âœ… GeoJSON               | `Cesium.GeoJsonDataSource` | æ ‡å‡†åœ°ç†æ•°æ®æ ¼å¼ï¼Œæ˜“ä¸ GIS ç»“åˆ |
| âœ… KML/KMZ               | `Cesium.KmlDataSource`     | Google Earth æ ¼å¼               |
| âœ… glTF / 3D Tiles       | `Cesium3DTileset`          | é«˜æ€§èƒ½å¤§è§„æ¨¡ 3D æ¨¡å‹å±•ç¤º        |
| âœ… Custom Primitive      | æ‰‹å†™ Shader å’Œå‡ ä½•ä½“       | é«˜çº§ç”¨æ³•ï¼Œè‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘        |

#### å››ã€3D ç“¦ç‰‡å›¾å±‚ï¼ˆ3D Tiles Layersï¼‰

Cesium ç‹¬æœ‰çš„ 3D Tiles æ ¼å¼ï¼Œç”¨äºé«˜æ€§èƒ½æ¸²æŸ“å¤§è§„æ¨¡å»ºç­‘æ¨¡å‹ã€BIMã€åŸå¸‚æ•°æ®ã€‚

ğŸ“¦ åŠ è½½æ–¹å¼ï¼š

```js
const tileset = new Cesium.Cesium3DTileset({ url: 'xxx/tileset.json' });
viewer.scene.primitives.add(tileset);
```

####  æ€»ç»“åˆ†ç±»è¡¨

| ç±»å‹            | åŠ è½½å…¥å£                  | æ¨èæ–¹å¼                                    | å…¸å‹æœåŠ¡                |
| --------------- | ------------------------- | ------------------------------------------- | ----------------------- |
| ğŸ—ºï¸ å½±åƒå›¾å±‚      | `imageryLayers`           | `WebMapTileServiceImageryProvider`          | å¤©åœ°å›¾ã€OSMã€ArcGIS     |
| ğŸ”ï¸ åœ°å½¢å›¾å±‚      | `terrain`                 | `Cesium.Terrain.fromWorldTerrain()`         | å…¨çƒé«˜ç¨‹                |
| ğŸ§± å®ä½“å›¾å±‚      | `entities` / `primitives` | `viewer.entities.add` / `GeoJsonDataSource` | ç‚¹çº¿é¢ã€åœ°æ ‡            |
| ğŸ§© 3D Tiles å›¾å±‚ | `scene.primitives`        | `Cesium3DTileset`                           | åŸå¸‚æ¨¡å‹ã€BIMã€å€¾æ–œæ‘„å½± |

#### å¤©åœ°å›¾

**å¤©åœ°å›¾**æ˜¯ä¸­å›½å®˜æ–¹æä¾›çš„å…è´¹åœ°å›¾æœåŠ¡ï¼Œç½‘å€æ˜¯ https://www.tianditu.gov.cnã€‚

å®ƒå°±åƒä¸­å›½ç‰ˆçš„ Google Maps æˆ–é«˜å¾·åœ°å›¾ï¼Œä¸è¿‡ï¼š

- æ›´åŠ é€‚ç”¨äºæ”¿åºœã€å›½ä¼ã€æ¶‰å¯†é¡¹ç›®
- æ•°æ®è¦†ç›–å…¨å›½ã€å‡†ç¡®æ€§é«˜
- æ”¯æŒæ ‡å‡†çš„åœ°å›¾æœåŠ¡åè®®ï¼ˆWMTSï¼‰

æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ Cesium é‡ŒåŠ è½½å¤©åœ°å›¾ï¼Œæ˜¯ä¸ºäº†**è®©åœ°å›¾èƒŒæ™¯æ•°æ®æ›´åŠ çœŸå®å’Œæƒå¨**ã€‚



##### å¤©åœ°å›¾æä¾›çš„å›¾å±‚ç§ç±» â€”â€” æ˜¯â€œå½±åƒå›¾å±‚â€ä¸‹çš„ä¸åŒé£æ ¼

| å¤©åœ°å›¾å›¾å±‚å      | å†…å®¹                   | å±äº Cesium å“ªç±»å›¾å±‚ï¼Ÿ                       |
| ----------------- | ---------------------- | -------------------------------------------- |
| `vec`ï¼ˆçŸ¢é‡å›¾ï¼‰   | é“è·¯ã€è¾¹ç•Œã€åŸºç¡€åº•å›¾   | âœ… **å½±åƒå›¾å±‚**                               |
| `cva`ï¼ˆçŸ¢é‡æ³¨è®°ï¼‰ | åœ°åã€æ–‡å­—æ ‡ç­¾         | âœ… **å½±åƒå›¾å±‚**ï¼ˆä½œä¸ºå åŠ å›¾å±‚ï¼‰               |
| `img`ï¼ˆå½±åƒå›¾ï¼‰   | å«æ˜Ÿç…§ç‰‡               | âœ… **å½±åƒå›¾å±‚**                               |
| `cia`ï¼ˆå½±åƒæ³¨è®°ï¼‰ | å½±åƒä¸Šçš„åœ°å           | âœ… **å½±åƒå›¾å±‚**                               |
| `ter`ï¼ˆåœ°å½¢æ¸²æŸ“ï¼‰ | åœ°å½¢ç€è‰²å›¾ï¼Œè§†è§‰æ•ˆæœç”¨ | âœ… ä¹Ÿä½œä¸º **å½±åƒå›¾å±‚** ç”¨é€”ï¼ˆä½†ä¸æ˜¯çœŸå®åœ°å½¢ï¼‰ |

##### ğŸ“Œ æ³¨æ„ï¼š

å¤©åœ°å›¾**ä¸ä¼šæä¾› Cesium çš„åœ°å½¢å›¾å±‚ï¼ˆå¦‚ .terrain æ–‡ä»¶ï¼‰**ï¼Œæ‰€ä»¥ï¼š

- å¦‚æœä½ æƒ³çœ‹åˆ°çœŸå®å±±è„‰åœ°å½¢ â†’ ç”¨ `Cesium.Terrain.fromWorldTerrain()`
- å¤©åœ°å›¾çš„ â€œterâ€ å›¾å±‚åªæ˜¯â€œåƒçœ‹èµ·æ¥æœ‰èµ·ä¼çš„é¢œè‰²å›¾â€ï¼Œ**å®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯å½±åƒå›¾å±‚**



```mathematica
Cesium å›¾å±‚ä½“ç³»
â”œâ”€â”€ ğŸ—ºï¸ å½±åƒå›¾å±‚ï¼ˆImagery Layerï¼‰
â”‚   â”œâ”€â”€ å¤©åœ°å›¾ vecï¼ˆçŸ¢é‡ï¼‰
â”‚   â”œâ”€â”€ å¤©åœ°å›¾ cvaï¼ˆæ³¨è®°ï¼‰
â”‚   â”œâ”€â”€ å¤©åœ°å›¾ imgï¼ˆå½±åƒï¼‰
â”‚   â””â”€â”€ å¤©åœ°å›¾ ciaï¼ˆå½±åƒæ³¨è®°ï¼‰
â”œâ”€â”€ ğŸ”ï¸ åœ°å½¢å›¾å±‚ï¼ˆTerrain Layerï¼‰
â”‚   â””â”€â”€ Cesium World Terrainï¼ˆçœŸå®é«˜ç¨‹æ•°æ®ï¼‰
â”œâ”€â”€ ğŸ§± å®ä½“å›¾å±‚ï¼ˆEntity Layerï¼‰
â”‚   â””â”€â”€ GeoJSONã€CZMLã€Entity API æ·»åŠ çš„ç‚¹çº¿é¢ç­‰
â””â”€â”€ ğŸ§© 3D Tiles å›¾å±‚ï¼ˆTileset Layerï¼‰
    â””â”€â”€ å€¾æ–œæ‘„å½± / BIM / åŸå¸‚å»ºç­‘æ¨¡å‹ç­‰
```

##### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> **å¤©åœ°å›¾çš„å„ç§å›¾å±‚ï¼ˆçŸ¢é‡ã€æ³¨è®°ã€å½±åƒï¼‰éƒ½æ˜¯â€œå½±åƒå›¾å±‚â€ï¼Œå®ƒä»¬æ˜¯ç”¨æ¥ç»™åœ°å›¾é“ºèƒŒæ™¯çš„ï¼Œä¸åŒ…å«åœ°å½¢æˆ–ä¸‰ç»´æ¨¡å‹ã€‚**



#### å›¾å±‚æ·»åŠ ä¸ç§»é™¤

1. ##### æ˜ç¡®å›¾å±‚çš„ç±»å‹åˆ†ç±»

```
viewer.imageryLayers.addImageryProvider()

viewer.imageryLayers.add(imageryLayer);
```





### åæ ‡ï¼š

åœ¨ Cesium ä¸­ï¼Œ**å‡ ä¹æ‰€æœ‰ç©ºé—´ä½ç½®çš„è¡¨è¾¾æœ€ç»ˆéƒ½å¿…é¡»è½¬æ¢ä¸ºä¸‰ç»´ç©ºé—´ä¸­çš„ç¬›å¡å°”åæ ‡ï¼ˆ`Cartesian3`ï¼‰**ï¼Œè¿™æ˜¯ Cesium çš„æ ¸å¿ƒåæ ‡ä½“ç³»ã€‚

#### ä¸ºä»€ä¹ˆä½¿ç”¨ç¬›å¡å°”åæ ‡ï¼ˆ`Cartesian3`ï¼‰ï¼Ÿ

Cesium æ˜¯ä¸€ä¸ªåŸºäº WebGL çš„ 3D åœ°çƒå¼•æ“ï¼Œå†…éƒ¨æ„å»ºçš„æ˜¯ä¸€ä¸ª**æ¤­çƒä½“æ¨¡å‹ï¼ˆWGS84ï¼‰**ã€‚ä¸ºäº†åœ¨ä¸‰ç»´åœºæ™¯ä¸­è¿›è¡Œæ¸²æŸ“å’Œæ•°å­¦è¿ç®—ï¼Œå®ƒç»Ÿä¸€é‡‡ç”¨äº†ä»¥åœ°å¿ƒä¸ºåŸç‚¹çš„ç¬›å¡å°”ä¸‰ç»´åæ ‡ç³»ï¼ˆå³æ‰‹ç³»ï¼‰ï¼š

- **X è½´**ï¼šæŒ‡å‘ç»åº¦ 0Â°ã€çº¬åº¦ 0Â° çš„æ–¹å‘ï¼ˆèµ¤é“å’Œæœ¬åˆå­åˆçº¿äº¤ç‚¹ï¼‰
- **Y è½´**ï¼šæŒ‡å‘ç»åº¦ 90Â°E çš„èµ¤é“æ–¹å‘
- **Z è½´**ï¼šæŒ‡å‘åŒ—æ

æ‰€ä»¥åœ¨ Cesium ä¸­ï¼Œæ‰€æœ‰**ç›¸æœºã€å®ä½“ã€æ ‡ç­¾ã€æ¨¡å‹ç­‰ä½ç½®**ï¼Œæœ€ç»ˆéƒ½è¦ç”¨ `Cartesian3` è¡¨è¾¾ã€‚

#### å¸¸ç”¨çš„ç»çº¬åº¦è½¬æ¢æ–¹å¼

| æ–¹æ³•                                                        | ç”¨é€”                                | ç¤ºä¾‹               |
| ----------------------------------------------------------- | ----------------------------------- | ------------------ |
| `Cesium.Cartesian3.fromDegrees(lon, lat, height)`           | å°† WGS84 ç»çº¬åº¦+é«˜åº¦ è½¬æ¢ä¸ºä¸‰ç»´ä½ç½® | âœ… æœ€å¸¸ç”¨           |
| `Cesium.Cartesian3.fromRadians(lonRad, latRad, height)`     | å¼§åº¦è½¬ä½ç½®                          | ç”¨å¾—è¾ƒå°‘           |
| `Cesium.Ellipsoid.WGS84.cartesianToCartographic(cartesian)` | åå‘è½¬æ¢ä¸ºç»çº¬åº¦ï¼ˆ`Cartographic`ï¼‰  | éœ€è¦è¯»å–åæ ‡æ—¶ä½¿ç”¨ |

**ä½ å¯ä»¥ç†è§£ä¸ºï¼š**

- åœ°ç†ä¿¡æ¯ï¼ˆ`ç»çº¬åº¦`ï¼‰æ˜¯ç”¨æˆ·ä½¿ç”¨çš„è¾“å…¥/è¾“å‡ºæ¥å£ã€‚
- æ¸²æŸ“å¼•æ“ï¼ˆCesiumï¼‰ä½¿ç”¨çš„æ˜¯**ä¸‰ç»´ç©ºé—´åæ ‡ï¼ˆ`Cartesian3`ï¼‰**ã€‚
- æ‰€ä»¥ä»»ä½•ä½ è¦â€œæ”¾åœ¨åœ°å›¾ä¸Šçš„ä¸œè¥¿â€ï¼Œéƒ½è¦ç»è¿‡**è½¬æ¢**åæ‰èƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚

#### ä¸¾ä¸ªä¾‹å­ï¼š

æ·»åŠ ä¸€ä¸ªæ ‡ç­¾æˆ–æ¨¡å‹æ—¶ï¼š

```js
const position = Cesium.Cartesian3.fromDegrees(116.39, 39.91, 1000); // åŒ—äº¬ 1000 ç±³é«˜ç©º
// æ·»åŠ æ¨¡æ¿ å¿…é¡»ä½¿ç”¨ä¸‰ç»´åæ ‡ç³»
viewer.entities.add({
  name: "åŒ—äº¬",
  position,
  point: {
    pixelSize: 10,
    color: Cesium.Color.RED
  }
});
```

å¦‚æœä½ ç›´æ¥ä½¿ç”¨ `lon`ã€`lat` æ˜¯æ— æ³•æ·»åŠ å®ä½“çš„ï¼Œå› ä¸º Cesium çš„åº•å±‚æ¸²æŸ“åªèƒ½ç†è§£ `Cartesian3`ã€‚



### æµ‹é‡è·ç¦»ï¼š

`handlerï¼š`**åˆ›å»ºä¸€ä¸ªç”¨äºç›‘å¬ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»ã€ç§»åŠ¨ã€æ»šè½®ã€è§¦æ‘¸ç­‰ï¼‰çš„äº‹ä»¶å¤„ç†å™¨å¯¹è±¡**ã€‚

```js
const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
```

å‚æ•° `canvas` æ˜¯ DOM å…ƒç´ ï¼Œé€šå¸¸ä½ ä¼ å…¥çš„æ˜¯ `viewer.scene.canvas`ï¼Œå³ Cesium æ¸²æŸ“çš„é‚£ä¸ª `WebGL` ç”»å¸ƒã€‚

**åº”è¯¥åœ¨éœ€è¦ç›‘å¬ç”¨æˆ·äº¤äº’æ—¶å†åˆ›å»º**ï¼Œè€Œä¸æ˜¯å…¨å±€æå‰åˆ›å»ºã€‚

 `ScreenSpaceEventHandler` çš„ä½œç”¨æ€»ç»“ï¼š

| åŠŸèƒ½                 | è¯´æ˜                                                   |
| -------------------- | ------------------------------------------------------ |
| ğŸ¯ **ç›‘å¬ç”¨æˆ·è¾“å…¥**   | ç›‘å¬é¼ æ ‡ã€è§¦æ§ã€æ»šè½®ç­‰äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€åŒå‡»ã€æ‹–åŠ¨ï¼‰       |
| ğŸ“ **è·å–ç‚¹å‡»ä½ç½®**   | å¯ç”¨äºè·å–åœ°çƒä¸Šçš„åæ ‡ä½ç½®ï¼ˆé…åˆ `pickPosition()`ï¼‰    |
| ğŸ§© **ç»‘å®šè‡ªå®šä¹‰å›è°ƒ** | ä½¿ç”¨ `.setInputAction()` ç»‘å®šäº‹ä»¶å›è°ƒ                  |
| ğŸ”„ **ç§»é™¤ç›‘å¬å™¨**     | ç”¨ `.removeInputAction()` æˆ– `.destroy()` åœæ­¢ç›‘å¬äº‹ä»¶ |



ç‚¹å‡»æµ‹é‡è·ç¦»çš„æŒ‰é’®ï¼Œè¿›å…¥åˆ°æµ‹é‡åŠŸèƒ½ï¼Œé¼ æ ‡ç§»å…¥åœ°å›¾å˜ä¸ºåå­—ã€‚

ç‚¹å‡»åœ°å›¾ï¼Œè·å–å½“å‰ç‚¹å‡»ä½ç½®ï¼Œåœ¨æ­¤ä½ç½®ç”Ÿæˆä¸€ä¸ªç‚¹æ ‡è®°ï¼Œæ¥ç€ç§»åŠ¨é¼ æ ‡ï¼Œå†æ¬¡ç‚¹å‡»ä¸€ä¸ªåæ ‡ï¼Œç”Ÿæˆæ ‡è®°ï¼ŒåŒæ—¶ç”Ÿæˆä¸¤ç‚¹ä¹‹é—´çš„è¿çº¿ï¼Œè®¡ç®—è·ç¦»ï¼Œæ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šï¼Œ

å¦‚æ­¤å¾€å¤ï¼Œç›´æ¥åŒå‡»å·¦é”®ï¼Œç»“æŸæµ‹é‡ã€‚



### æ·»åŠ å®ä½“ï¼š

#### æ–¹æ³•ï¼š

åœ¨ Cesium ä¸­ï¼Œ**æ·»åŠ å®ä½“æ˜¯é€šè¿‡ `viewer.entities.add(options)` æ–¹æ³•**å®Œæˆçš„ï¼Œæ·»åŠ è¿›å»çš„å®ä½“æ˜¯ `Cesium.Entity` ç±»å‹çš„å¯¹è±¡ã€‚

#### å‚æ•°ï¼š

`options`æ˜¯ä¸€ä¸ªæ™®é€šçš„é…ç½®å¯¹è±¡ï¼Œç±»å‹æ˜¯ `Entity.ConstructorOptions`å—ï¼Œç”¨æ¥æè¿°è¿™ä¸ªå®ä½“è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚ä½ç½®ã€å›¾æ ‡ã€çº¿ã€é¢ç­‰ã€‚

#### è¿”å›å€¼ï¼š

è¿”å›çš„æ˜¯ä¸€ä¸ª `Entity` å¯¹è±¡ï¼ˆ`Cesium.Entity` ç±»å‹ï¼‰ï¼Œä½ å¯ä»¥åç»­æ“ä½œå®ƒï¼Œæ¯”å¦‚æ›´æ–°ä½ç½®ã€éšè—ã€åˆ é™¤ç­‰ã€‚

#### å®ä½“ç±»å‹ï¼š

| å®ä½“ç±»å‹       | å±æ€§å           | è¯´æ˜                                     |
| -------------- | ---------------- | ---------------------------------------- |
| ğŸ“ ç‚¹æ ‡è®°       | `point`          | æ˜¾ç¤ºä¸€ä¸ªå°åœ†ç‚¹ï¼ˆé€šå¸¸ç”¨ä½œå®šä½ã€æ‰“ç‚¹ï¼‰     |
| ğŸ–¼ å›¾æ ‡æ ‡æ³¨     | `billboard`      | æ˜¾ç¤ºä¸€ä¸ªå›¾ç‰‡ï¼ˆå›¾æ ‡ã€å¤´åƒã€å›¾é’‰ï¼‰         |
| ğŸ“ æ–‡æœ¬æ ‡ç­¾     | `label`          | æ˜¾ç¤ºæ–‡å­—ï¼ˆä½ç½®åç§°ã€ç¼–å·ç­‰ï¼‰             |
| ğŸ§­ æè¿°é¢æ¿     | `description`    | é¼ æ ‡ç‚¹å‡»å¼¹å‡ºçš„ HTML æè¿°ï¼ˆå¯åŒ…å«å¯Œæ–‡æœ¬ï¼‰ |
| ğŸŸ° çº¿æ®µ         | `polyline`       | å¤šæ®µæŠ˜çº¿ï¼Œå¸¸ç”¨äºè·¯å¾„ã€è¿çº¿ç­‰             |
| ğŸŸ¨ å¤šè¾¹å½¢       | `polygon`        | å¹³é¢åŒºåŸŸï¼Œä¾‹å¦‚ç»˜åˆ¶åŒºåŸŸã€å›´æ ç­‰           |
| ğŸ§Š å¤šé¢ä½“       | `polylineVolume` | å¸¦é«˜åº¦çš„æ‹‰ä¼¸é¢ï¼ˆå¦‚ç®¡é“ã€ç«‹ä½“å¢™ï¼‰         |
| ğŸ“¦ ç›’å­         | `box`            | ä¸‰ç»´ç«‹æ–¹ä½“                               |
| ğŸ¥› åœ†æŸ±ä½“       | `cylinder`       | æŸ±çŠ¶å‡ ä½•ä½“                               |
| ğŸ§ˆ æ¤­çƒä½“       | `ellipsoid`      | ç±»ä¼¼çƒä½“                                 |
| ğŸ§¿ çƒä½“åŒºåŸŸ     | `ellipse`        | æ¤­åœ†å½¢çŠ¶ï¼ˆåœ¨åœ°è¡¨æŠ•å½±ï¼‰                   |
| ğŸª„ åœ†é”¥ä½“       | `cone`           | ç”¨äºå¯è§†åŸŸåˆ†æç­‰ï¼ˆCesium 1.113+ï¼‰        |
| ğŸš¶ è·¯å¾„         | `path`           | æ˜¾ç¤ºå®ä½“çš„è¿åŠ¨è½¨è¿¹                       |
| ğŸ›« æ¨¡å‹         | `model`          | åŠ è½½ 3D æ¨¡å‹ï¼ˆå¦‚ GLTFã€GLB æ ¼å¼ï¼‰        |
| ğŸ§© åŠ¨æ€å§¿æ€æ¨¡å‹ | `orientation`    | è®¾ç½®æœå‘ï¼ˆå¦‚é£æœºæœå‰é£ï¼‰                 |
| ğŸ—º è·¯å¾„ä½ç½®     | `position`       | å®ä½“çš„åœ°ç†åæ ‡ä½ç½®                       |

#### æ·»åŠ å›¾æ ‡å®ä½“ï¼š

åœ¨åœ°å›¾ä¸Šæ·»åŠ å›¾æ ‡é€šå¸¸æ˜¯é€šè¿‡ `Billboardsï¼ˆå¹¿å‘Šç‰Œï¼‰`æ¥å®ç°çš„ã€‚`Billboards` æ˜¯ä¸–ç•Œç©ºé—´ä¸­çš„äºŒç»´å›¾åƒï¼Œå§‹ç»ˆæœå‘è§‚çœ‹è€…ã€‚

**ä½¿ç”¨ viewer.entities.add() (æ¨èç”¨äºå¤§å¤šæ•°æƒ…å†µ):** è¿™æ˜¯æ›´ç°ä»£ä¸”åŠŸèƒ½æ›´å¼ºå¤§çš„æ–¹æ³•ï¼Œå®ƒå°†å›¾æ ‡ä½œä¸ºå®ä½“ï¼ˆ`Entity`ï¼‰çš„ä¸€éƒ¨åˆ†è¿›è¡Œç®¡ç†ã€‚

```js
viewer.entities.add({
    //å®ä½“æœ¬èº«çš„æ ¸å¿ƒå±æ€§
    // ä¸‰ç»´ç¬›å¡å°”åæ ‡
    position: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883),
    name: 'è¿™æ˜¯ä¸€ä¸ªå›¾æ ‡å®ä½“',
    description: 'é¼ æ ‡ç‚¹å‡»åæ˜¾ç¤ºåœ¨ä¿¡æ¯æ¡†ä¸­çš„å†…å®¹ã€‚',
    
    // --- å›¾æ ‡ç›¸å…³çš„è¯¦ç»†å‚æ•° ---
    billboard: {
        image: "../images/Cesium_Logo_overlay.png", // default: undefined
        show: true, // default
        pixelOffset: new Cesium.Cartesian2(0, -50), // default: (0, 0)
        eyeOffset: new Cesium.Cartesian3(0.0, 0.0, 0.0), // default
        horizontalOrigin: Cesium.HorizontalOrigin.CENTER, // default
        verticalOrigin: Cesium.VerticalOrigin.BOTTOM, // default: CENTER
        scale: 2.0, // default: 1.0
        color: Cesium.Color.LIME, // default: WHITE
        rotation: Cesium.Math.PI_OVER_FOUR, // default: 0.0
        alignedAxis: Cesium.Cartesian3.ZERO, // default
        width: 100, // default: undefined
        height: 25, // default: undefined
    },
});
```

##### billboard å¯¹è±¡å†…çš„å…³é”®å‚æ•°è¯¦è§£

**1. åŸºç¡€ä¸å›¾åƒ (Basic & Image)**

| å‚æ•°å         | æ•°æ®ç±»å‹                                        | é»˜è®¤å€¼ | å«ä¹‰                                                         |
| -------------- | ----------------------------------------------- | ------ | ------------------------------------------------------------ |
| **image**      | String æˆ– HTMLCanvasElement æˆ– HTMLImageElement |        | **ï¼ˆå¿…éœ€ï¼‰** æŒ‡å®šå›¾æ ‡çš„å›¾åƒæ¥æºã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ª URL å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Canvas æˆ– Image å…ƒç´ ã€‚ |
| show           | Boolean                                         | true   | æ§åˆ¶å›¾æ ‡æ˜¯å¦å¯è§ã€‚é»˜è®¤ä¸º trueã€‚                              |
| imageSubRegion | BoundingRectangle                               |        | ä»ä¸€ä¸ªæ›´å¤§çš„å›¾åƒï¼ˆé›ªç¢§å›¾/ç²¾çµå›¾ï¼‰ä¸­è£å‰ªå‡ºç‰¹å®šåŒºåŸŸä½œä¸ºå›¾æ ‡ã€‚ä¾‹å¦‚ new Cesium.BoundingRectangle(x, y, width, height)ã€‚ |

**2. å®šä½ä¸åç§» (Positioning & Offset)**

| å‚æ•°å           | æ•°æ®ç±»å‹         | é»˜è®¤å€¼                  | å«ä¹‰                                                         |
| ---------------- | ---------------- | ----------------------- | ------------------------------------------------------------ |
| pixelOffset      | Cartesian2       | Cartesian2.ZERO         | åœ¨å±å¹•ç©ºé—´ä¸­ï¼Œç›¸å¯¹äºå›¾æ ‡åŸç‚¹ï¼ˆposition å±æ€§ï¼‰çš„åƒç´ åç§»é‡ã€‚ä¾‹å¦‚ new Cesium.Cartesian2(0, -20) ä¼šä½¿å›¾æ ‡å‘ä¸Šåç§»20åƒç´ ã€‚ |
| eyeOffset        | Cartesian3       | Cartesian3.ZERO         | åœ¨ç›¸æœºç©ºé—´ä¸­çš„3Dåç§»é‡ã€‚è¿™å¯¹äºå°†å›¾æ ‡ä»å…¶é™„ç€çš„3Dæ¨¡å‹æˆ–åœ°çƒè¡¨é¢â€œæ¨â€å‘ç›¸æœºéå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é˜²æ­¢Z-fightingï¼ˆæ·±åº¦å†²çª/é—ªçƒï¼‰ã€‚ä¾‹å¦‚ new Cesium.Cartesian3(0, 0, -10)ã€‚ |
| horizontalOrigin | HorizontalOrigin | HorizontalOrigin.CENTER | è®¾ç½®å›¾æ ‡çš„æ°´å¹³å¯¹é½ç‚¹ã€‚å¯é€‰å€¼ï¼šCesium.HorizontalOrigin.LEFT (å·¦å¯¹é½), Cesium.HorizontalOrigin.CENTER (å±…ä¸­), Cesium.HorizontalOrigin.RIGHT (å³å¯¹é½)ã€‚é»˜è®¤ä¸º CENTERã€‚ |
| verticalOrigin   | VerticalOrigin   | VerticalOrigin.CENTER   | è®¾ç½®å›¾æ ‡çš„å‚ç›´å¯¹é½ç‚¹ã€‚å¯é€‰å€¼ï¼šCesium.VerticalOrigin.TOP (é¡¶éƒ¨å¯¹é½), Cesium.VerticalOrigin.CENTER (å±…ä¸­), Cesium.VerticalOrigin.BASELINE (åŸºçº¿), Cesium.VerticalOrigin.BOTTOM (åº•éƒ¨å¯¹é½)ã€‚é»˜è®¤ä¸º CENTERã€‚ |

**3. å°ºå¯¸ä¸ç¼©æ”¾ (Sizing & Scaling)**

| å‚æ•°å       | æ•°æ®ç±»å‹ | é»˜è®¤å€¼ | å«ä¹‰                                                         |
| ------------ | -------- | ------ | ------------------------------------------------------------ |
| scale        | Number   | 1.0    | å›¾åƒçš„ç¼©æ”¾æ¯”ä¾‹ã€‚1.0 ä»£è¡¨åŸå§‹å°ºå¯¸ï¼Œ0.5 ä»£è¡¨ç¼©å°ä¸€åŠï¼Œ2.0 ä»£è¡¨æ”¾å¤§ä¸€å€ã€‚ |
| width        | Number   |        | å›¾æ ‡çš„å®½åº¦ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ã€‚å¦‚æœè®¾ç½®äº†æ­¤é¡¹ï¼Œscale å°†è¢«å¿½ç•¥ã€‚   |
| height       | Number   |        | å›¾æ ‡çš„é«˜åº¦ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ã€‚å¦‚æœè®¾ç½®äº†æ­¤é¡¹ï¼Œscale å°†è¢«å¿½ç•¥ã€‚   |
| sizeInMeters | Boolean  | false  | å¦‚æœè®¾ä¸º trueï¼Œwidth å’Œ height çš„å•ä½å°†æ˜¯ç±³ï¼Œå›¾æ ‡ä¼šéšç›¸æœºè¿œè¿‘è€Œç¼©æ”¾ï¼Œçœ‹èµ·æ¥åƒåœ°é¢ä¸Šçš„çœŸå®ç‰©ä½“ã€‚é»˜è®¤ä¸º falseã€‚ |

**4. é¢œè‰²ä¸æ—‹è½¬ (Color & Rotation)**

| å‚æ•°å      | æ•°æ®ç±»å‹   | é»˜è®¤å€¼          | å«ä¹‰                                                         |
| ----------- | ---------- | --------------- | ------------------------------------------------------------ |
| color       | Color      | Color.WHITE     | åº”ç”¨äºå›¾åƒçš„é¢œè‰²ã€‚è¯¥é¢œè‰²ä¼šä¸åŸå§‹å›¾åƒçš„é¢œè‰²æ··åˆã€‚é»˜è®¤ä¸º Cesium.Color.WHITE (ä¸æ”¹å˜åŸè‰²)ã€‚è®¾ç½®ä¸º Cesium.Color.RED ä¼šç»™å›¾æ ‡æŸ“ä¸Šçº¢è‰²è‰²è°ƒã€‚ |
| rotation    | Number     | 0               | å›¾æ ‡å›´ç»•å…¶è½´çº¿ï¼ˆä» position æŒ‡å‘ç›¸æœºï¼‰çš„æ—‹è½¬è§’åº¦ï¼Œå•ä½æ˜¯å¼§åº¦ã€‚å¯ä»¥ä½¿ç”¨ Cesium.Math.toRadians(degrees) å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦ã€‚é»˜è®¤ä¸º 0.0ã€‚ |
| alignedAxis | Cartesian3 | Cartesian3.ZERO | è®¾ç½®å›¾æ ‡çš„æ—‹è½¬è½´ï¼Œå•ä½æ˜¯å›ºå®šçš„ä¸–ç•Œåæ ‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾æ ‡å§‹ç»ˆæœå‘ç›¸æœºã€‚å¦‚æœè®¾ç½®æ­¤å±æ€§ï¼ˆä¾‹å¦‚ new Cesium.Cartesian3(0, 0, 1)ï¼Œå³Zè½´ï¼‰ï¼Œå›¾æ ‡å°†ç»•ç€è¯¥è½´æ—‹è½¬ï¼Œè€Œä¸æ˜¯å§‹ç»ˆé¢å‘ç›¸æœºã€‚ |

**5. å¯è§æ€§ä¸è·ç¦»æ˜¾ç¤º (Visibility & Distance Display)**

| å‚æ•°å                   | æ•°æ®ç±»å‹                 | å«ä¹‰                                                         |
| ------------------------ | ------------------------ | ------------------------------------------------------------ |
| distanceDisplayCondition | DistanceDisplayCondition | æ ¹æ®ä¸ç›¸æœºçš„è·ç¦»å†³å®šå›¾æ ‡æ˜¯å¦å¯è§ã€‚éå¸¸é€‚åˆå®ç°LODï¼ˆLevel of Detailï¼‰æ•ˆæœã€‚ä¾‹å¦‚ new Cesium.DistanceDisplayCondition(1000, 10000) è¡¨ç¤ºå›¾æ ‡ä»…åœ¨ç›¸æœºè·ç¦»1000ç±³åˆ°10000ç±³ä¹‹é—´æ—¶æ‰å¯è§ã€‚ |
| scaleByDistance          | NearFarScalar            | æ ¹æ®ä¸ç›¸æœºçš„è·ç¦»åŠ¨æ€è°ƒæ•´å›¾æ ‡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚ä¾‹å¦‚ new Cesium.NearFarScalar(1.5e2, 2.0, 8.0e6, 0.5) è¡¨ç¤ºåœ¨è¿‘å¤„ï¼ˆ150ç±³ï¼‰æ—¶æ”¾å¤§åˆ°2å€ï¼Œåœ¨è¿œå¤„ï¼ˆ800ä¸‡ç±³ï¼‰æ—¶ç¼©å°åˆ°0.5å€ã€‚ |
| translucencyByDistance   | NearFarScalar            | æ ¹æ®ä¸ç›¸æœºçš„è·ç¦»åŠ¨æ€è°ƒæ•´å›¾æ ‡çš„é€æ˜åº¦ã€‚ç”¨æ³•ä¸ scaleByDistance ç±»ä¼¼ï¼Œä½†æ§åˆ¶çš„æ˜¯é€æ˜åº¦ï¼ˆ0.0å®Œå…¨é€æ˜ï¼Œ1.0å®Œå…¨ä¸é€æ˜ï¼‰ã€‚ |
| disableDepthTestDistance | Number                   | å½“å›¾æ ‡ä¸ç›¸æœºçš„è·ç¦»å°äºæ­¤å€¼ï¼ˆç±³ï¼‰æ—¶ï¼Œå°†ç¦ç”¨æ·±åº¦æµ‹è¯•ã€‚è¿™ä¼šä½¿å›¾æ ‡å§‹ç»ˆæ˜¾ç¤ºåœ¨å…¶ä»–ç‰©ä½“ä¹‹ä¸Šï¼Œå³ä½¿å®ƒå®é™…ä¸Šåœ¨ç‰©ä½“åé¢ã€‚é€‚ç”¨äºéœ€è¦å§‹ç»ˆæ˜¾ç¤ºçš„é‡è¦æ ‡è®°ã€‚ |



#### æ·»åŠ ç‚¹å®ä½“ï¼š

```js
viewer.entities.add({
  position: cartesian,
  point: {
    pixelSize: 5,
    color: Cesium.Color.RED,
    outlineColor: Cesium.Color.WHITE,
    outlineWidth: 1,
    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,
  },
});
```



#### æ·»åŠ çº¿æ®µå®ä½“ï¼š

`polyline` æ˜¯ä¸€ç§ `Entity` ç±»å‹ï¼Œè¡¨ç¤ºä¸€æ¡çº¿æ®µæˆ–æŠ˜çº¿ï¼›

```ts
viewer.entities.add({
  polyline: {
    positions: [...], // ç‚¹æ•°ç»„
    width: 3,
    material: Cesium.Color.RED,
  },
});
```

##### `polyline.positions` æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ **çº¿æ®µçš„é¡¶ç‚¹åæ ‡æ•°ç»„**ï¼Œä¹Ÿå°±æ˜¯çº¿æ¡çš„è·¯å¾„ã€‚

ğŸ”¹ ç±»å‹ï¼š

```ts
// ä¸‰ç»´åæ ‡ç‚¹Cesium.Cartesian3 æ„æˆçš„æ•°ç»„ï¼Œ è¿™äº›ç‚¹å°†æŒ‰é¡ºåºè¿æ¥èµ·æ¥ï¼Œå½¢æˆæŠ˜çº¿ã€‚
positions: Cartesian3[] ã€‚
// æˆ–è€… 
positions: CallbackProperty<Cartesian3[]>
```

###### 1. positions: Cartesian3[]ï¼š

ä¸‰ç»´åæ ‡ç‚¹`Cesium.Cartesian3` æ„æˆçš„æ•°ç»„ï¼Œ è¿™äº›ç‚¹å°†æŒ‰é¡ºåºè¿æ¥èµ·æ¥ï¼Œå½¢æˆæŠ˜çº¿ã€‚

æ— æ³•ç›´æ¥ç”¨ `[lng, lat]`ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸ºç¬›å¡å°”ä¸‰ç»´åæ ‡ï¼š

```ts
const pos = Cesium.Cartesian3.fromDegrees(lon, lat, height)
```

æˆ–è€…åœ¨äº¤äº’ä¸­é€šè¿‡ç‚¹å‡»è·å–ï¼š

```ts
const pos1 = viewer.scene.pickPosition(click.position); // å·²æ˜¯ Cartesian3
const pos2 = viewer.scene.pickPosition(click.position);
```

```ts
viewer.entities.add({
  polyline: {
    positions: [pos1,pos2], // ç‚¹æ•°ç»„
    width: 3,
    material: Cesium.Color.RED,
  },
});
```



###### 2. positions: CallbackProperty<Cartesian3[]>

`Cesium.CallbackProperty`

`Cesium.CallbackProperty` æ˜¯ `Cesium` æä¾›çš„ä¸€ä¸ªå‡½æ•°å°è£…ç±»ï¼Œç”¨äºè®©æŸä¸ªå±æ€§ï¼ˆå¦‚ä½ç½®ã€é¢œè‰²ã€é€Ÿåº¦ç­‰ï¼‰**åœ¨æ¯ä¸€å¸§å®æ—¶é‡æ–°è®¡ç®—å’Œåˆ·æ–°**ã€‚

```js
viewer.entities.add({
    polyline: {
      positions: new Cesium.CallbackProperty(() => positions, false),
      width: 3,
      material: Cesium.Color.RED,
      clampToGround: false,
    },
  });
```

```js
positions: new Cesium.CallbackProperty(() => positions, false),
```

è¿™è¡¨ç¤ºï¼šæ¯ä¸€å¸§éƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè·å–æœ€æ–°çš„ `positions` æ•°ç»„ï¼Œè‡ªåŠ¨æ›´æ–°çº¿æ®µçš„ç»˜åˆ¶ç»“æœã€‚

åªè¦ä½ åœ¨æ¯æ¬¡ç‚¹å‡»æ—¶å¾€ `positions` æ•°ç»„ä¸­ `push` ä¸€ä¸ªæ–°åæ ‡ç‚¹ï¼Œ`Cesium` å°±ä¼šåœ¨ä¸‹ä¸€å¸§è‡ªåŠ¨é‡ç»˜çº¿æ®µã€‚

ç¬¬äºŒä¸ªå‚æ•°ï¼š`false` çš„å«ä¹‰

```
new Cesium.CallbackProperty(fn, isConstant)
```

- ç¬¬äºŒä¸ªå‚æ•° `isConstant` è¡¨ç¤ºè¿™ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„å€¼æ˜¯å¦**æ°¸è¿œä¸å˜**ã€‚
- è®¾ç½®ä¸º `false`ï¼Œå‘Šè¯‰ Cesiumï¼š**è¿™ä¸ªå€¼ä¼šå˜åŒ–**ï¼Œè¯·æ¯ä¸€å¸§éƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ˆå¦‚æœä¼šå˜åŒ–ï¼Œå°±è®¾ä¸º `false`ï¼‰ã€‚



###### æ‰©å±•ï¼š

> ä½¿ç”¨ `CallbackProperty(() => positions, false)` æ—¶ï¼ŒCesium ä¼šåœ¨æ¯ä¸€å¸§éƒ½è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œä»å¤´åˆ°å°¾è·å–ä½ å½“å‰çš„æ•´ä¸ª `positions` æ•°ç»„ï¼Œç„¶åä»ç¬¬ä¸€ä¸ªç‚¹å¼€å§‹**å®Œæ•´ç»˜åˆ¶ä¸€æ¬¡æ•´æ¡çº¿æ®µ**ã€‚
>
> æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ
>
> - æ¯å¸§è™½ç„¶è°ƒç”¨ `CallbackProperty`ï¼Œä½†åªæœ‰å½“ä½ è¿”å›çš„å†…å®¹**å‘ç”Ÿç»“æ„å˜åŒ–**ï¼ˆå¦‚ push æ–°ç‚¹ï¼‰ï¼Œå®ƒæ‰ä¼šçœŸæ­£é‡æ–°è®¡ç®—å›¾å…ƒï¼ˆprimitiveï¼‰ï¼›
> - è¿™ç§ã€Œä½é¢‘æ•°æ®å˜åŠ¨ + é«˜é¢‘åˆ·æ–°ã€æ˜¯ Cesium çš„å¸¸è§„æœºåˆ¶ï¼Œåº”ç”¨å¹¿æ³›äºåŠ¨ç”»ã€åŠ¨æ€è·¯å¾„ã€é¼ æ ‡äº¤äº’ç­‰åœºæ™¯ï¼›
> - æ•°ç»„è¶Šé•¿é‡ç»˜è¶Šæ…¢æ˜¯ç†è®ºä¸Šå­˜åœ¨çš„ï¼Œä½†å³ä½¿ä¸Šåƒä¸ªç‚¹ä¹Ÿè¶³å¤Ÿé«˜æ•ˆï¼Œé™¤éä½ æ¯å¸§éƒ½åˆ›å»º/é”€æ¯å®ä½“ï¼ˆè¿™æ‰ä¼šå¡ï¼‰ã€‚
>
> æ˜¯å¦å¯ä»¥åªé‡ç»˜æ–°å¢çš„é‚£ä¸€æ®µï¼Ÿ
>
> Cesium é»˜è®¤çš„ `CallbackProperty` å¹¶ä¸æ”¯æŒã€Œéƒ¨åˆ†é‡ç»˜ã€ã€‚å¦‚æœä½ çœŸçš„éœ€è¦ä¼˜åŒ–åˆ°æè‡´ï¼ˆæ¯”å¦‚æ•°ä¸‡ç‚¹ï¼‰ï¼Œä½ éœ€è¦ï¼š
>
> 1. ä¸ä½¿ç”¨ `Entity` + `CallbackProperty`ï¼›
> 2. æ”¹ç”¨ `Primitive`ï¼ˆåº•å±‚ APIï¼‰+ `GeometryInstance`ï¼Œæ‰‹åŠ¨æ§åˆ¶æ›´æ–°ï¼›
> 3. æˆ–è€…ï¼Œæ¯æ¬¡ç‚¹å‡»åªåˆ›å»ºæ–°ä¸€æ®µ `polyline entity`ï¼ˆå°±åƒä½ ä¹‹å‰ç”¨ `[p1, p2]` é‚£æ ·ï¼‰ã€‚





### æµ‹é‡é¢ç§¯





### äº‹ä»¶

`movement.endPosition`æ˜¯æ™®é€šåœ°å›¾ä¸Šçš„ä½ç½®æˆ–è€…å®ä½“æ˜¯ï¼Œè¿”å›çš„ç»“æœæœ‰ä»€ä¹ˆåŒºåˆ«

```
viewer.scene.pick(movement.endPosition);
```

