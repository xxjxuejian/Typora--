用例图（Use Case Diagram）是 **UML（统一建模语言, Unified Modeling Language）** 中最基础、也最常用的图之一。它属于**需求分析阶段**的工具，用来从用户（或外部系统）的角度描述系统能做什么。简单说：**它展示了“谁”和“系统”之间“发生了什么事”**。

------

### 一、用例图的核心概念

用例图由三个主要元素组成：

#### 1. **参与者（Actor）**

代表系统外部与系统交互的对象，可以是：

- **人类用户**（如管理员、客户）
- **其他系统**（如支付网关、数据库）
- **外部设备**（如传感器、打印机）

一个参与者**不在系统内部**，但它触发系统功能或被系统调用。

例：

- “用户” 登录系统 → 用户是参与者
- “支付宝系统” 处理支付 → 支付宝系统也是参与者

------

#### 2. **用例（Use Case）**

用例是系统提供的一个功能或服务，是参与者与系统之间交互的行为单位。
 用例一般命名为**动宾结构**（例如“注册账户”、“上传文件”、“查看订单”）。

例：

- “注册账户”
- “提交订单”
- “支付成功通知”

------

#### 3. **系统边界（System Boundary）**

通常画成一个大矩形，表示系统的范围。
 所有的用例都在这个矩形内部，而参与者在矩形外部。

矩形的标题一般是系统名称，例如「在线商城系统」。

------

### 二、关系（Relationships）

用例图的“灵魂”在于各元素间的关系，主要有四种：

#### 1. **关联（Association）**

表示参与者与用例之间的交互关系。
 用**实线**连接参与者与用例。

例：用户 —— 登录系统

------

#### 2. **包含（Include）**

表示一个用例**必然会调用**另一个用例的一部分功能。
 用例A中**包含（include）**用例B。
 语法：A —— «include» ——> B

例：

- “下单”包含“验证库存”
- “注册账户”包含“验证邮箱”

👉 表示复用：公共步骤被多个用例复用。

------

#### 3. **扩展（Extend）**

表示一个用例在**特定条件下**才会执行另一个用例。
 语法：A —— «extend» ——> B
 （B是基础用例，A是扩展用例）

例：

- “登录系统”扩展“找回密码”
- “提交订单”扩展“使用优惠券”

👉 表示可选行为：扩展用例在特定条件下触发。

------

#### 4. **泛化（Generalization）**

用例或参与者之间的**继承关系**。

- 子用例继承父用例的行为，并可进行扩展。
- 子参与者继承父参与者的交互权限。

例：

- “管理员”继承“用户”
- “在线支付”继承“支付”

------

### 三、一个简单示例

假设我们有一个「在线购物系统」，其用例图可以这样理解：

```ini
+--------------------------------------------------------+
|               在线购物系统               |
|                                      |
|   (用例) 登录账户                         |
|   (用例) 浏览商品                         |
|   (用例) 下单 ----«include»----> 验证库存         |
|   (用例) 支付订单 ----«extend»----> 使用优惠券      |
|                                      |
+--------------------------------------------------------+
```

系统外部：

- 用户（Actor）：与所有用例交互
- 支付系统（Actor）：与“支付订单”交互

------

### 四、用例图的作用

1. **帮助理解系统需求**：让开发人员、产品经理、客户都能直观看到系统“能做什么”。
2. **划定系统边界**：明确系统负责的部分与外部交互部分。
3. **为后续设计做准备**：用例图是顺接**活动图、时序图、类图**等更详细设计的起点。



___

___

### 一、参与者一定是系统之外的吗？

是的，**参与者（Actor）一定在系统之外**。

UML 里，**系统边界（System Boundary）** 的矩形就像是一堵墙，墙内的是系统内部逻辑，墙外的是所有与系统交互的外部实体。参与者的本质是：

> “与系统交互，但不属于系统的一部分。”

也就是说：

- 用户在使用系统 → 用户是参与者；
- 外部支付接口（比如支付宝） → 也是参与者；
- 但系统内部的模块（例如“订单管理模块”）不是参与者，而是系统内部结构，用在类图、组件图中才会出现。

------

### 二、用例是否是系统向参与者提供的功能或服务？

完全正确。
 用例（Use Case）就是**系统对外提供的一个完整功能**，从参与者的角度看，是他们能“使用”的服务。

你可以理解为：

> 参与者通过某种方式触发系统，而系统响应一个完整的行为流——这个行为流就是一个用例。

例如：

- 用户点击“登录” → 系统验证信息并返回结果 → 这就是“登录系统”用例。
- 用户下单 → 系统验证库存、生成订单、返回成功 → 这就是“下单”用例。

------

### 三、用例是否一定要与参与者有关联？

一般情况下，**是的**。

因为：

- 如果一个用例**没有任何参与者与之交互**，那它的存在就失去了意义：没有人（或外部系统）会触发它。
- 所以，在绝大多数需求建模中，每个用例至少要有一个关联的参与者。

但这里有一个**小小的例外**：

> 某些用例可能只是被其他用例“包含（include）”或“扩展（extend）”，而不是直接被参与者触发。

比如：

- “验证库存”这个用例不会由用户直接操作，它是“下单”用例的子过程。
   这时：
  - “下单”与“用户”有关联；
  - “验证库存”与“用户”**没有直接关联**，但它仍然是系统提供的一个功能片段。

------

### 小结一下

| 概念              | 是否系统外部 | 是否需要关联参与者         | 示例                 |
| ----------------- | ------------ | -------------------------- | -------------------- |
| 参与者            | ✅ 是系统外部 | ——                         | 用户、外部支付系统   |
| 用例              | ❌ 在系统内部 | ✅ 一般需要（或间接被包含） | 登录、下单、支付订单 |
| 被包含/扩展的用例 | ❌ 在系统内部 | ❌ 可无直接参与者           | 验证库存、发送通知   |

------

换句话说：

> 参与者是系统外的“触发者”，
>  用例是系统内的“响应者”。
>  两者之间通过关联线，形成系统对外服务的最小交互单位。