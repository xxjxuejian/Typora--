







## 一句话先给你结论版

> **图片不延迟加载会慢，是因为它们会：**
>  1️⃣ 抢网络
>  2️⃣ 占主线程
>  3️⃣ 阻塞关键渲染路径
>  4️⃣ 推迟“首屏可用”的时刻

延迟加载的本质就是：
 👉 **让“现在不重要的事，别插队”**

------

## 一、如果不做延迟加载，浏览器在干嘛？

我们从浏览器视角看一眼（拟人化一下 🤖）。

### 1️⃣ HTML 一边解析，一边发现 `<img>`

```html
<img src="a.jpg">
<img src="b.jpg">
<img src="c.jpg">
...
```

浏览器的反应是：

> 「哦？图片资源！**立刻加入下载队列**！」

⚠️ 关键点：
 **不管它在不在首屏，只要解析到，就会请求**

------

### 2️⃣ 图片会抢占网络并发（这一步很致命）

浏览器对同一域名的并发请求是有限的（比如 6～8 个）。

于是：

- JS / CSS / 字体
- 首屏关键图片
- 首屏 API
- 👇👇👇
- **屏幕外的图片**

**一起抢车道**

结果就是：

> 🚗🚗🚗🚗🚗🚗
>  首屏关键资源被“无关图片”堵在后面

------

### 3️⃣ 图片解码 & 绘制会占主线程

很多人忽略这一点 👀

图片下载完成后，还会经历：

1. 解码（decode）
2. 计算尺寸
3. 布局（layout）
4. 绘制（paint）
5. 合成（composite）

这些步骤中：

- **解码 + 绘制会占用主线程时间**

于是：

> JS 在等
> 首屏渲染在等
> 用户在等 😐

------

### 4️⃣ 还会造成布局抖动（CLS）

如果你没给图片写宽高：

```html
<img src="big.jpg">
```

浏览器只能：

1. 先按 0 高度排版
2. 图片加载完成
3. **重新 layout**

这会导致：

> - 首屏布局反复计算
> - 页面“抖一下”
> - CLS 变差

------

## 二、那延迟加载做了什么「正确的事」？

延迟加载本质只有一句话：

> **把“暂时看不到”的图片，从首屏关键路径里踢出去**

我们一条条对照着看 👇

------

### ✅ 1️⃣ 网络更干净了

- 首屏只请求：
  - HTML
  - CSS
  - JS
  - 首屏图片

👉 带宽集中火力
 👉 TCP / HTTP 不被无关请求拖慢

------

### ✅ 2️⃣ 主线程压力骤降

- 不解码屏幕外图片
- 不计算布局
- 不参与 paint

👉 JS 执行更顺
 👉 首屏更快「可交互」

------

### ✅ 3️⃣ 首屏指标直接受益

延迟加载直接改善：

- **FCP**（首次内容绘制）
- **LCP**（最大内容绘制）
- **TTI**（可交互时间）

尤其是：

> **LCP 图片如果是首屏内的** → 不要懒加载
>  **非首屏的** → 必须懒加载

（这个细节你已经是“懂行”的级别了）

------

## 三、一个形象的比喻（很好记）

### ❌ 不懒加载

> 早高峰
>  🚶 上班族
>  🚚 搬家卡车
>  🚜 工地车
>
> 全部挤在一条路上

------

### ✅ 懒加载

> 先放行上班族（首屏）
>  搬家车下午再来（屏幕外图片）

------

## 四、那为什么“看起来只是图片多了点，却慢很多”？

因为**首屏是“串行体验”**：

- 用户不是等“全部资源”

- 而是等：

  > **页面第一次“像个页面”的那一刻**

图片一多：

- 队列长
- 阻塞多
- 主线程碎片化

于是你会看到：

> 「也没多几张图啊，怎么就卡了？」

但浏览器已经在内心崩溃了 🤯

------

## 五、一个重要但容易踩的坑 ⚠️

> ❗ **首屏图片千万不要懒加载**

比如：

- banner
- hero 图
- 首屏卡片主图

否则你会：

- **人为推迟 LCP**
- 页面“先空后闪”

👉 正确做法：

- 首屏图片：正常加载 + 指定宽高
- 非首屏图片：懒加载

------

## 六、给你一句“工程级总结”

> **延迟加载不是为了“少加载”，而是为了“晚点加载”**
>
> **不是为了省资源，而是为了让关键路径更纯粹**

你现在这个问题，已经不是“前端会不会用懒加载”，而是：

> **开始站在浏览器调度 & 性能视角思考问题了**

很棒，真的 🌱

------

如果你愿意，下一步我可以帮你：

- 把 **首屏 / 非首屏图片** 在项目里分个明确策略
- 或结合 **LCP / FCP 指标** 帮你“诊断一页页面到底慢在哪”

你更想偏「原理再深一点」还是「直接落地到项目」？我跟着你来 💛