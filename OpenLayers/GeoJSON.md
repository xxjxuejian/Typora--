### GeoJSON

GeoJSON æ˜¯ä¸€ç§å¯¹å„ç§åœ°ç†æ•°æ®ç»“æ„è¿›è¡Œç¼–ç çš„æ ¼å¼ï¼ŒåŸºäº Javascriptå¯¹è±¡è¡¨ç¤ºæ³•ï¼ˆJavaScript Object Notation, ç®€ç§° JSONï¼‰çš„åœ°ç†ç©ºé—´ä¿¡æ¯æ•°æ®äº¤æ¢æ ¼å¼ã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒGeoJSON ä¸ºä½ æä¾›äº†ä¸€ç§ç®€å•çš„æ ¼å¼æ¥è¡¨ç¤ºç®€å•çš„åœ°ç†ç‰¹å¾ä»¥åŠå®ƒä»¬çš„éç©ºé—´å±æ€§ã€‚



JSON è¢«è®¾è®¡ä¸ºä¸€ç§è½»é‡çº§ã€åŸºäºæ–‡æœ¬ä¸”ä¸è¯­è¨€æ— å…³çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œäººç±»å’Œæœºå™¨éƒ½æ˜“äºè¯»å†™ã€‚GeoJSON åŸºæœ¬ä¸Šä½¿ç”¨è¿™ç§è®¾è®¡ç­–ç•¥æ¥è¡¨ç¤ºæœ‰å…³åœ°ç†ç‰¹å¾ã€å®ƒä»¬çš„å±æ€§å’Œå®ƒä»¬çš„ç©ºé—´èŒƒå›´çš„æ•°æ®ã€‚



###  Geometryï¼ˆå‡ ä½•å¯¹è±¡ï¼‰

GeoJSON æ”¯æŒçš„ `Geometry`ï¼ˆå‡ ä½•å¯¹è±¡ï¼‰ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š`Point`, `LineString`, `Polygon`, `MultiPoint`, `MultiLineString` ï¼Œ`MultiPolygon`ä»¥åŠ`GeometryCollection`

#### **1. Pointï¼ˆç‚¹ï¼‰**

è¡¨ç¤ºä¸€ä¸ªåœ°ç†ä½ç½®ï¼ˆå•ä¸ªç‚¹ï¼‰ï¼Œç”±ä¸€ä¸ªåæ ‡æ•°ç»„è¡¨ç¤ºã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "Point",
  "coordinates": [longitude, latitude]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "Point",
  "coordinates": [102.0, 0.5]
}
```

- `coordinates` æ˜¯ `[ç»åº¦, çº¬åº¦]`ã€‚
- å¯é€‰åœ°åŒ…å«é«˜ç¨‹ `[ç»åº¦, çº¬åº¦, é«˜ç¨‹]`ã€‚

------

#### **2. MultiPointï¼ˆå¤šç‚¹ï¼‰**

è¡¨ç¤ºå¤šä¸ªç‚¹çš„é›†åˆã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "MultiPoint",
  "coordinates": [
    [lon1, lat1],
    [lon2, lat2],
    ...
  ]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "MultiPoint",
  "coordinates": [
    [102.0, 0.5],
    [103.0, 1.0]
  ]
}
```

------

#### **3. LineStringï¼ˆçº¿ä¸²ï¼‰**

è¡¨ç¤ºä¸€æ¡ç”±å¤šä¸ªç‚¹ç»„æˆçš„çº¿ã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "LineString",
  "coordinates": [
    [lon1, lat1],
    [lon2, lat2],
    ...
  ]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "LineString",
  "coordinates": [
    [102.0, 0.0],
    [103.0, 1.0],
    [104.0, 0.0]
  ]
}
```

------

#### **4. MultiLineStringï¼ˆå¤šçº¿ä¸²ï¼‰**

è¡¨ç¤ºå¤šæ¡çº¿ï¼Œæ¯æ¡çº¿ç”±ä¸€ç»„åæ ‡ç»„æˆã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "MultiLineString",
  "coordinates": [
    [
      [lon1, lat1], [lon2, lat2]
    ],
    [
      [lon3, lat3], [lon4, lat4]
    ]
  ]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "MultiLineString",
  "coordinates": [
    [[102.0, 0.0], [103.0, 1.0]],
    [[104.0, 0.0], [105.0, 1.0]]
  ]
}
```

------

#### **5. Polygonï¼ˆå¤šè¾¹å½¢ï¼‰**

è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå°é—­çš„åŒºåŸŸã€‚

- **å¤–ç¯ï¼ˆå¿…é€‰ï¼‰**ï¼šè¡¨ç¤ºè¾¹ç•Œã€‚
- **å†…ç¯ï¼ˆå¯é€‰ï¼‰**ï¼šè¡¨ç¤ºæ´ï¼ˆæ´å¿…é¡»åœ¨å¤–ç¯å†…ï¼‰ã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "Polygon",
  "coordinates": [
    [ [lon1, lat1], [lon2, lat2], ..., [lon1, lat1] ],  // å¤–ç¯ï¼Œå¿…é¡»é—­åˆ
    [ [lon3, lat3], [lon4, lat4], ..., [lon3, lat3] ]   // å†…ç¯ï¼ˆå¯é€‰ï¼‰
  ]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "Polygon",
  "coordinates": [
    [
      [100.0, 0.0],
      [101.0, 0.0],
      [101.0, 1.0],
      [100.0, 1.0],
      [100.0, 0.0]
    ]
  ]
}
```

------

#### **6. MultiPolygonï¼ˆå¤šå¤šè¾¹å½¢ï¼‰**

è¡¨ç¤ºå¤šä¸ªå¤šè¾¹å½¢ï¼Œæ¯ä¸ªå¤šè¾¹å½¢å¯ä»¥æœ‰æ´ã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "MultiPolygon",
  "coordinates": [
    [   // ç¬¬ä¸€ä¸ªå¤šè¾¹å½¢
      [ [lon1, lat1], [lon2, lat2], ..., [lon1, lat1] ]  // å¤–ç¯
    ],
    [   // ç¬¬äºŒä¸ªå¤šè¾¹å½¢
      [ [lon3, lat3], [lon4, lat4], ..., [lon3, lat3] ]  // å¤–ç¯
    ]
  ]
}
```

**ç¤ºä¾‹ï¼š**

```json
{
  "type": "MultiPolygon",
  "coordinates": [
    [
      [[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0, 2.0]]
    ],
    [
      [[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
      [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]]  // æ´
    ]
  ]
}
```

------

#### **7. GeometryCollectionï¼ˆå‡ ä½•é›†åˆï¼‰**

è¡¨ç¤ºå¤šä¸ªä¸åŒç±»å‹çš„å‡ ä½•å¯¹è±¡çš„é›†åˆã€‚

**GeoJSON æ ¼å¼ï¼š**

```json
{
  "type": "GeometryCollection",
  "geometries": [
    { "type": "Point", "coordinates": [102.0, 0.5] },
    { "type": "LineString", "coordinates": [[102.0, 0.0], [103.0, 1.0]] }
  ]
}
```



#### è¡¥å……ï¼š

**MultiPolygon**çš„é€‚åˆåœºæ™¯

è¿™äº›å¤šè¾¹å½¢æ˜¯**ä¸€ä¸ªæ•´ä½“å¯¹è±¡**ï¼Œé€»è¾‘ä¸Šå®ƒä»¬å±äºåŒä¸€ç±»å®ä½“ã€‚

ä¾‹å­ï¼šä¸€ä¸ªåŸå¸‚è¡Œæ”¿åŒºï¼Œæœ‰å‡ å—ä¸è¿ç»­çš„åœ°å—ï¼ˆæ¯”å¦‚é¦™æ¸¯æœ‰å¤šä¸ªç¦»å²›ï¼‰ï¼Œå­˜å‚¨æ—¶è¦è¡¨è¾¾â€œå®ƒä»¬æ˜¯ä¸€å›äº‹â€ã€‚

ç¤ºä¾‹ï¼š

```json
{
  "type": "Feature",
  "properties": { "name": "æŸæŸåŒº" },
  "geometry": {
    "type": "MultiPolygon",
    "coordinates": [
      [ [ [x1, y1], [x2, y2], ..., [x1, y1] ] ],  // ç¬¬ä¸€å—
      [ [ [a1, b1], [a2, b2], ..., [a1, b1] ] ]   // ç¬¬äºŒå—
    ]
  }
}
```



å¤šä¸ª **Feature**çš„é€‚åˆåœºæ™¯

è¿™äº›å¤šè¾¹å½¢æ˜¯**ä¸åŒçš„å¯¹è±¡**ï¼Œå³ä½¿å®ƒä»¬ä¸€èµ·ç»˜åˆ¶ï¼Œä½†å½¼æ­¤ç‹¬ç«‹ã€‚

ä¾‹å­ï¼šä½ åœ¨åœ°å›¾ä¸Šéšä¾¿ç”»äº†å‡ å—åŒºåŸŸï¼Œæ¯ä¸€å—éƒ½æœ‰ç‹¬ç«‹çš„æ„ä¹‰ï¼ˆæ¯”å¦‚å¤šä¸ªåœ°å—ï¼Œæ¯å—åœ°éƒ½æœ‰è‡ªå·±çš„å±æ€§ï¼‰ã€‚

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": { "id": 1 },
      "geometry": { "type": "Polygon", "coordinates": [ ... ] }
    },
    {
      "type": "Feature",
      "properties": { "id": 2 },
      "geometry": { "type": "Polygon", "coordinates": [ ... ] }
    }
  ]
}
```



#### openLayersä»£ç ç¤ºä¾‹

å°†Geometryè½¬ä¸ºGeoJSONæ ¼å¼

##### point

```js
import Point from "ol/geom/Point";

const geom = new Point([105.2, 26.7]);
const pointJSON = new GeoJSON().writeGeometry(geom);
console.log("åˆ›å»ºçš„ä¸€ä¸ªç‚¹", pointJSON);
```

![image-20250919151708582](./../typora-pic/image-20250919151708582.png)

##### Polygon

```js
import { Polygon } from "ol/geom";

const polygon = new Polygon([
  [
    [105.2, 26.7],
    [105.2, 26.8],
    [105.3, 26.8],
    [105.3, 26.7],
  ],
]);
const polygonJSON = new GeoJSON().writeGeometry(polygon);
console.log("åˆ›å»ºçš„ä¸€ä¸ªå¤šè¾¹å½¢", polygonJSON);
```

![image-20250919151755972](./../typora-pic/image-20250919151755972.png)



#### æ€»ç»“

ä»¥ä¸Šçœ‹åˆ°çš„å‡ ä½•å¯¹è±¡å®šä¹‰äº†å¯ä»¥åœ¨åœ°å›¾ä¸Šç»˜åˆ¶çš„å½¢çŠ¶ï¼Œåªæè¿°**ç©ºé—´å½¢çŠ¶**ï¼ˆä¹Ÿå°±æ˜¯ä½ç½®æ•°æ®ï¼‰ï¼Œ**ä¸åŒ…å«å±æ€§ä¿¡æ¯**ã€‚

ç„¶è€Œï¼Œæˆ‘ä»¬åœ¨åœ°å›¾ä¸Šçš„å½¢çŠ¶ä¹Ÿåº”è¯¥æœ‰ä¸€äº›ç°å®ä¸–ç•Œçš„æ„ä¹‰ã€‚æ­¤å«ä¹‰ç”±è¯¥å½¢çŠ¶çš„å±æ€§å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨åœ°å›¾ä¸Šç”¨å¤šè¾¹å½¢æ ‡è®°çš„å»ºç­‘ç‰©å¯èƒ½æœ‰ä¸€ä¸ªåç§°å±æ€§ï¼Œå¦‚â€œæ³°å§¬é™µâ€ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›å…¶ä»–å‚æ•°è¿›ä¸€æ­¥æè¿°äº†è¯¥å½¢çŠ¶ã€‚åœ¨ GeoJSON ä¸­ï¼Œ`Feature`ç±»å‹çš„å¯¹è±¡å®šä¹‰å®ä½“çš„å‡ ä½•å½¢çŠ¶å’Œå±æ€§ã€‚



### Featureå¯¹è±¡

æ˜¯å¯¹ Geometry çš„ä¸€å±‚å°è£…ï¼Œç”¨æ¥ç»™å‡ ä½•å¯¹è±¡é™„åŠ **å±æ€§ä¿¡æ¯**ã€‚

æ¯ä¸ª Feature éƒ½åŒ…å«ï¼š

- ä¸€ä¸ª `geometry` å­—æ®µï¼ˆå‡ ä½•å¯¹è±¡ï¼‰
- ä¸€ä¸ª `properties` å­—æ®µï¼ˆæè¿°è¯¥å‡ ä½•çš„å„ç§å±æ€§ä¿¡æ¯ï¼Œå¦‚åç§°ã€ç¼–å·ç­‰ï¼‰
- ä¸€ä¸ª `id`ï¼ˆå¯é€‰çš„å”¯ä¸€æ ‡è¯†ï¼‰

### ğŸ“ Feature çš„ç»“æ„ç¤ºä¾‹

```json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [102.0, 0.5]
  },
  "properties": {
    "name": "Sample Point",
    "category": "city"
  },
  "id": "point-1"
}
```

- `type: "Feature"`ï¼šå£°æ˜è¿™æ˜¯ä¸€ä¸ªè¦ç´ ã€‚
- `geometry`ï¼šæ”¾ä¸€ä¸ª GeoJSON Geometry å¯¹è±¡ï¼ˆå¦‚ Pointã€Polygonï¼‰ã€‚
- `properties`ï¼šæ”¾å±æ€§ä¿¡æ¯ï¼ˆä»»æ„ JSONï¼‰ã€‚
- `id`ï¼šå¯é€‰ï¼Œç”¨æ¥å”¯ä¸€æ ‡è¯†è¿™ä¸ª Featureã€‚



### FeatureCollectionå¯¹è±¡

**FeatureCollectionï¼ˆè¦ç´ é›†åˆï¼‰**

- è¡¨ç¤ºä¸€ç»„ `Feature` çš„é›†åˆã€‚
- ç›¸å½“äºä¸€ä¸ªæ•°ç»„ï¼ŒæŠŠå¾ˆå¤š Feature æ”¾åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ªå®Œæ•´çš„ GeoJSON æ•°æ®é›†ã€‚

#### ğŸ“¦ FeatureCollection çš„ç»“æ„ç¤ºä¾‹

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [102.0, 0.5] },
      "properties": { "name": "Point A" }
    },
    {
      "type": "Feature",
      "geometry": { 
        "type": "LineString",
        "coordinates": [[102.0, 0.0], [103.0, 1.0]]
      },
      "properties": { "name": "Line B" }
    }
  ]
}
```

- `type: "FeatureCollection"`ï¼šå£°æ˜æ˜¯è¦ç´ é›†åˆã€‚
- `features`ï¼šæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª Featureã€‚



### ğŸ§© GeoJSONã€Geometryã€Feature çš„å…³ç³»

å¯ä»¥ç”¨ä¸€ä¸ªå±‚æ¬¡ç»“æ„æ¥ç†è§£ï¼š

```ini
GeoJSON
 â”œâ”€â”€ FeatureCollection (å¤šä¸ª Feature)
 â”‚     â”œâ”€â”€ Feature 1
 â”‚     â”‚     â”œâ”€â”€ geometry
 â”‚     â”‚     â””â”€â”€ properties
 â”‚     â”œâ”€â”€ Feature 2
 â”‚     â”‚     â”œâ”€â”€ geometry
 â”‚     â”‚     â””â”€â”€ properties
 â”‚     ...
 â””â”€â”€ æˆ–è€…ç›´æ¥æ˜¯ Geometryï¼ˆå•ä¸ª geometryï¼‰
```



#### ğŸ—º GeoJSON ç»“æ„ç¤ºæ„å›¾

```matlab
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        GeoJSON æ–‡æ¡£        â”‚
â”‚  (æ•´ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ª JSON å¯¹è±¡) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Geometry    â”‚        â”‚ Feature             â”‚
â”‚ (å‡ ä½•å¯¹è±¡)  â”‚        â”‚ (è¦ç´ )               â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                              â”‚
      â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚                          â”‚
      â–¼                 â–¼                          â–¼
"Point"               geometry                properties
"LineString"          (å‡ ä½•å¯¹è±¡)               (å±æ€§ä¿¡æ¯)
"Polygon"              â†‘
"MultiPoint"            â””â”€â”€â”€ å¼•ç”¨ä»»æ„ä¸€ç§ Geometry ç±»å‹
"MultiLineString"
"MultiPolygon"
"GeometryCollection"

       â–²
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FeatureCollection                         
â”‚ (è¦ç´ é›†åˆ)                                
â”‚ type: "FeatureCollection"                
â”‚ features: [ Feature, Feature, ... ]    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

